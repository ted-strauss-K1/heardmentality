<?php
function qlite_perm() {
    
    return array('QLite', 'Report', 'Report Content', 'Ajax Content');

} // function newmodule_perm
function qlite_menu() {
    
    $item['qmini'] = array('title'=>'Question Lite', 'page callback'=>'qlitemini', 'access arguments'=>array('QLite'), 'type'=>MENU_CALLBACK, 'file'=>'qlite.pages.inc', );
    
    $item['qmini/report'] = array('title'=>'Question Lite', 'page callback'=>'qlite_report', 'type'=>MENU_CALLBACK, 'access arguments'=>array('Report'), 'file'=>'qlite.pages.inc', );
    $item['qmini/repcontent'] = array('title'=>'Question Lite', 'page callback'=>'report_content', 'type'=>MENU_CALLBACK, 'access arguments'=>array('Report Content'), 'file'=>'qlite.pages.inc', );
    $item['qmini/ajax'] = array('title'=>'Question Lite', 'page callback'=>'load_ajax', 'type'=>MENU_CALLBACK, 'access arguments'=>array('Ajax Content'), 'file'=>'qlite.pages.inc', );
    
    return $item;


}

function top_list() {
    drupal_add_js(drupal_get_path('module', 'qlite').'/scripts/qmini.js');
    $output = '';
    
    $query = "SELECT * from {category} where parent_id='0' ORDER BY cat_name ASC";
    $list = ExecuteQuery($query, "select");
    $output .= '<select id="tcat" onchange="get_toplist(this.value,1)"><option value="" >Select</option>';
    foreach ($list as $cat) {
        
        $output .= '<option value='.$cat['cat_id'].' > '.$cat['cat_name'].' </option>';
    }
    
    $output .= '</select><br/>	<div id="res_scat"> </div><br/><div id="res_top">';
    
    $output .= get_top_list();
    
    $output .= get_hot_list();
    
    $output .= get_local_list();
    
    echo "</div>";

    
    return $output;


}

