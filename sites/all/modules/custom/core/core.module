<?php

/**
 * Include content types
 */
include_once('core.features.inc');

/**
 * Implementation of hook_nodeapi()
 *
 * @param $node
 * @param $op
 * @param null $a3
 * @param null $a4
 */
function core_nodeapi(&$node, $op, $a3 = NULL, $a4 = NULL)
{
  if ('issue' == $node->type) {
    switch ($op) {
      case 'view' :
        // todo translation
        $node->description = trim_better($node->content['body']['#value'], 2500);
        $node->description_f = $node->content['body']['#value'];
        $node->description_s = $node->description != $node->description_f;

        drupal_add_js(drupal_get_path('module', 'core') . '/core.js');

      break;
      case 'insert' :
      case 'update' :
        //
      break;
    }
  }
}